# ImportCSV 2.0: The Clerk for CSV Imports

**Date:** 2025-12-28
**Status:** Draft
**Author:** Design brainstorm session

---

## Executive Summary

Transform ImportCSV from a solid open-source library into the "Clerk for CSV imports" — a developer-first, cloud-native solution with beautiful components, AI-powered features, and usage-based pricing.

### The One-Liner

> **ImportCSV: Drop-in CSV imports for modern applications.**

---

## Problem Statement

### The Market Gap

| Segment | Problem |
|---------|---------|
| **Enterprise tools** (Flatfile, Oneschema) | $10K+/year, sales calls, lengthy integration |
| **Cheap/free tools** | Ugly UI, can't customize, embarrassing to embed |

**ImportCSV fills the middle:** Polished like enterprise, priced for startups, easy to integrate.

### The Narrative

> Every SaaS app needs data imports. You think it's simple — just parse a CSV.
>
> Then reality hits: Users upload Excel files with merged cells. Column names don't match. Phone numbers are formatted 15 different ways. A 500MB file crashes the browser tab.
>
> You've got two options: Pay $15K/year for an enterprise tool, or spend weeks building something that still looks like it's from 2010.
>
> **ImportCSV is the third option.** A beautiful, production-ready import component that installs in 5 minutes. AI-powered column mapping that just works. Handles files your users actually send.
>
> Open source. Usage-based pricing. No sales calls.

---

## Business Model

### Three-Tier Offering

**1. ImportCSV Core (npm package, MIT, free forever)**
- React/Preact component
- Local file parsing (CSV, Excel)
- Zod schema validation
- Built-in transformers
- Virtual scrolling for large files
- Headless primitives for custom UI
- Beautiful default theme

**2. ImportCSV Cloud (hosted backend, usage-based)**
- AI column mapping (auto-match messy headers)
- Natural language transformations
- Webhook notifications
- Import analytics dashboard
- No infrastructure to manage
- 100 imports/month free, then ~$0.05-0.10/import

**3. ImportCSV Enterprise (self-hosted, AGPL)**
- Full backend on your infrastructure
- SSO/SAML integration
- Audit logs
- Custom SLAs
- Volume discounts

### Pricing Model

- **Metric:** Per import job (each completed import = 1 billable event)
- **Free tier:** 100 imports/month
- **Paid:** Usage-based beyond free tier

---

## Feature Gating Strategy

Single repo, two modes. Features gated at runtime via environment variables.

```typescript
// /admin/src/lib/features.ts
export const features = {
  billing: process.env.IMPORTCSV_CLOUD === 'true',
  usageLimits: process.env.IMPORTCSV_CLOUD === 'true',
  teamManagement: process.env.IMPORTCSV_CLOUD === 'true',
  auditLogs: isEnterprise(),
}
```

### Feature Matrix

| Feature | Self-Hosted (AGPL) | Cloud Free | Cloud Paid |
|---------|-------------------|------------|------------|
| Importer CRUD | ✓ | ✓ | ✓ |
| Schema builder | ✓ | ✓ | ✓ |
| Webhooks | ✓ | ✓ | ✓ |
| Import history | ✓ | ✓ | ✓ |
| AI column mapping | ✓ (bring your own key) | ✓ | ✓ |
| Usage analytics | ✓ | ✓ | ✓ |
| Imports/month | Unlimited | 100 | Unlimited |
| Team seats | Unlimited | 1 | Based on plan |
| Priority support | ✗ | ✗ | ✓ |
| SLA guarantee | ✗ | ✗ | ✓ |
| SSO/SAML | ✓ (DIY) | ✗ | Enterprise |
| Audit logs | ✓ | ✗ | Enterprise |
| White-label | ✓ | ✗ | Enterprise |

---

## Product Architecture

### Current State

```
/frontend    → npm package (MIT)
/backend     → FastAPI server (AGPL)
/admin       → Next.js dashboard (AGPL)
```

- `importerKey` connects frontend to cloud
- Admin dashboard has importer CRUD, schema builder, webhooks, preview
- Missing: billing, usage metering, import history, API keys, dashboard metrics

### Target State

Same architecture, with additions:

```
Dashboard:
├── Home (usage metrics, recent imports, upgrade prompt)
├── Importers (existing, enhanced)
├── Imports (history across all importers)
│   └── [import] → row-level details, errors, webhook status
├── API Keys (create, view masked, revoke)
├── Webhooks (global log)
├── Settings
│   ├── Team (future)
│   └── Billing (Stripe integration)
└── Docs (external link)
```

---

## CSV Importer Component Design

### Design Principles

Inspired by Clerk, Linear, Stripe:
- **Confident whitespace** — not cramped
- **Subtle depth** — light shadows, not flat
- **Clear hierarchy** — user always knows where they are
- **Smooth motion** — responsive transitions
- **Dark mode native** — not an afterthought

### Import Flow

```
Upload → Map Columns → Review Data → Fix Errors → Done
```

**Upload**
- Large drop zone with subtle animated border
- Instant feedback (file name, row count preview)

**Map Columns**
- AI maps automatically, shows checkmark if matched
- User only acts on unmatched columns
- Simple dropdown to manually select
- No confidence badges — hide the AI, make it feel like magic

**Review Data**
- Stripe-quality data table with sticky headers
- Validation errors shown inline (red border, tooltip)
- Summary bar: "247 valid, 3 errors"

**Fix Errors**
- Click on error → inline edit
- Real-time revalidation
- "Skip invalid rows" option visible

**Complete**
- Subtle success state
- Summary: "247 rows imported successfully"
- Clear next action or auto-close

### UX Principles

1. **Hide the AI** — feels like magic, not machine learning
2. **Only surface what needs attention** — problems stand out, success fades
3. **One action per screen** — progressive, not overwhelming
4. **Progressive disclosure** — advanced options only when clicked

---

## Dashboard Design

### Home Dashboard

```
┌─────────────────────────────────────────────────────┐
│  This month                                         │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐             │
│  │   47    │  │  12.4K  │  │  98.2%  │             │
│  │ imports │  │  rows   │  │ success │             │
│  └─────────┘  └─────────┘  └─────────┘             │
│                                                     │
│  Usage: ████████░░ 47/100 free imports              │
│  [Upgrade to Pro →]                                 │
│                                                     │
│  Recent Imports                                     │
│  ┌─────────────────────────────────────────────┐   │
│  │ contacts.csv    │ 2 min ago │ 847 rows │ ✓  │   │
│  │ products.xlsx   │ 1 hr ago  │ 124 rows │ ✓  │   │
│  │ leads.csv       │ yesterday │ 12 rows  │ ⚠  │   │
│  └─────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────┘
```

### Key Screens

| Screen | Purpose |
|--------|---------|
| **Home** | Usage metrics, recent imports, upgrade prompt |
| **Importers list** | Configured importers, quick actions |
| **Importer detail** | Schema, settings, embed code, preview |
| **Imports history** | All imports, filterable by importer/status |
| **Import detail** | Row-by-row data, errors, webhook delivery status |
| **API Keys** | Create, view (masked), revoke keys |
| **Billing** | Current plan, usage, upgrade/downgrade, invoices |

---

## Developer Experience

### The 5-Minute Promise

**Step 1: Install (30 seconds)**
```bash
npm install @importcsv/react
```

**Step 2: Get API Key (60 seconds)**
- Sign up at importcsv.dev (GitHub/Google OAuth)
- Dashboard auto-creates first importer
- API key visible immediately, one-click copy

**Step 3: Drop In Component (90 seconds)**
```tsx
import { CSVImporter } from '@importcsv/react'

<CSVImporter
  importerKey="imp_live_abc123"
  onComplete={(data) => console.log(data)}
/>
```

**Step 4: See It Work (60 seconds)**
- Upload a CSV
- See AI map columns
- Get data in `onComplete`

### In-Dashboard Onboarding

```
Welcome to ImportCSV! Let's get you set up:

☑ Create account
☐ Create your first importer
☐ Define at least one column
☐ Test with a sample CSV
☐ Integrate in your app

[Continue Setup →]
```

---

## Go-to-Market Strategy

### Content Marketing

Write about the *pain*, not the product:

| Article | Target |
|---------|--------|
| "Handling 500MB CSV uploads in React" | Developers hitting browser limits |
| "Why Papa Parse isn't enough for production" | Developers outgrowing basic solutions |
| "Building a CSV import UX that doesn't suck" | Developers about to build their own |
| "Excel file handling in Node.js: the gotchas" | Developers hitting .xlsx edge cases |

### Distribution Channels

| Channel | Action |
|---------|--------|
| **Hacker News** | Launch post when v1.0 is polished |
| **Reddit** (r/reactjs, r/webdev) | Useful content, not promos |
| **Twitter/X** | Build in public |
| **GitHub** | Discoverable repo (good README, topics) |

### Product-Led Growth

- Interactive demo on homepage — try before install
- Comparison page — honest trade-offs vs. alternatives
- 2-minute video walkthrough

---

## Prioritized Roadmap

### Phase 1: Foundation (Launchable)

| Priority | Item |
|----------|------|
| P0 | Billing integration (Stripe) |
| P0 | Usage metering & limits |
| P0 | API key management |
| P0 | Import history page |
| P1 | Dashboard home with metrics |
| P1 | Component visual polish |
| P1 | 5-minute quickstart docs |

### Phase 2: Polish (Clerk-Level)

| Priority | Item |
|----------|------|
| P1 | Dark mode for component |
| P1 | Smoother animations/transitions |
| P1 | Empty states that guide |
| P1 | In-dashboard onboarding checklist |
| P2 | Keyboard shortcuts |
| P2 | Import detail view (row-level) |

### Phase 3: Growth (Expand Reach)

| Priority | Item |
|----------|------|
| P2 | Vue support |
| P2 | Interactive homepage demo |
| P2 | SEO content (4-5 articles) |
| P2 | Comparison pages |
| P3 | Team management |
| P3 | Audit logs |

### Explicitly NOT on Roadmap

- Mobile app
- Slack/Discord integration
- Custom AI model training
- On-prem enterprise installer
- GraphQL API

---

## Success Metrics

| Metric | Target |
|--------|--------|
| Time to first import | < 5 minutes |
| Free → Paid conversion | > 5% |
| Monthly active importers | Track growth |
| Import success rate | > 95% |
| NPS | > 50 |

---

## Open Questions

1. **Exact pricing tiers** — $0.05/import? $0.10? Need market validation
2. **AI provider** — OpenAI only or support multiple?
3. **Vue timeline** — Phase 3 or earlier based on demand?
4. **Team management scope** — How many seats per tier?

---

## Next Steps

1. Review and approve this design
2. Create implementation plan for Phase 1
3. Set up Stripe account and billing infrastructure
4. Design component visual refresh
5. Build dashboard additions
